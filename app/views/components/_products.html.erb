<b>
  <div class="col-md-10">
    <div class="col-md-1">ID</div>
    <div class="col-md-3">Identifier</div>
    <div class="col-md-3">Name</div>
    <div class="col-md-3">Purchase</div>
    <div class="col-md-2">Components</div>
  </div>
  <div class="col-md-2"><%= link_to 'New Product', new_product_path %></div>
  <hr/>
</b>
<% product_picker = ProductPicker.new(component) %>
<div class="col-md-10">
  <div class="col-md-1">
  <button>filter</button>
  </div>
  <div class="col-md-6">
    <input type="text" size="40" id="product_filter" name="product_filter" value=<%= params['product_filter'] %>>
  </div>
  <form name="picker" method="get" action="<%= fulcrum_partial_path(:components, Base64.urlsafe_encode64(component.noid)) %>">
    <div class="col-md-5">
    <%= select_tag "product_id", options_for_select(product_picker.products(params['product_filter']), params[:product_id] || ''), include_blank: '', onchange: "this.form.submit();" %>
    </div>

  </form>
</div>
<div class="col-md-2">

  <%= form_tag(component_products_path(component), method: "post") do %>
    <%= hidden_field_tag 'id', params[:product_id]  %>
    <%= button_tag(type: 'submit', disabled: params[:product_id].blank?,  class: 'btn btn-default') do %>
      <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add
    <% end %>
  <% end %>
</div>

<% products.each do |product| %>
  <div class="col-md-10">
    <div class="col-md-1"><%= link_to product.id, product %></div>
    <div class="col-md-3"><%= product.identifier %></div>
    <div class="col-md-3"><%= product.name %></div>
    <div class="col-md-3"><%= link_to product.purchase, product.purchase %></div>
    <div class="col-md-2"><%= product.components.count %></div>
  </div>
  <div class="col-md-2">
    <%= link_to(component_product_path(component, product), method: :delete, class: "btn btn-default") do %>
      <span class="glyphicon glyphicon-minus" aria-hidden="true"></span> Remove
    <% end %>
  </div>
<% end %>
<% if component.not_products.present? %>
  <%= form_tag(component_products_path(component), method: "post") do %>
    <div class="col-md-10">
      <div class="col-md-1"></div>
      <div class="col-md-11"><%= select_tag "id", options_from_collection_for_select(component.not_products, "id", "identifier") %></div>
    </div>
    <div class="col-md-2">
      <%= button_tag(type: 'submit',  class: 'btn btn-default') do %>
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add
      <% end %>
    </div>
  <% end %>
<% end %>
